{"remainingRequest":"F:\\learn\\vue\\珠峰\\01-vue\\vue2\\vue2源码系列\\VUE2-10-vue-component\\node_modules\\babel-loader\\lib\\index.js!F:\\learn\\vue\\珠峰\\01-vue\\vue2\\vue2源码系列\\VUE2-10-vue-component\\src\\components\\history\\vue-lazyload.js","dependencies":[{"path":"F:\\learn\\vue\\珠峰\\01-vue\\vue2\\vue2源码系列\\VUE2-10-vue-component\\src\\components\\history\\vue-lazyload.js","mtime":1612086152000},{"path":"F:\\learn\\vue\\珠峰\\01-vue\\vue2\\vue2源码系列\\VUE2-10-vue-component\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1721811178353},{"path":"F:\\learn\\vue\\珠峰\\01-vue\\vue2\\vue2源码系列\\VUE2-10-vue-component\\node_modules\\babel-loader\\lib\\index.js","mtime":1721811187800}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJGOi9sZWFybi92dWUvXHU3M0UwXHU1Q0YwLzAxLXZ1ZS92dWUyL3Z1ZTJcdTZFOTBcdTc4MDFcdTdDRkJcdTUyMTcvVlVFMi0xMC12dWUtY29tcG9uZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiRjovbGVhcm4vdnVlL1x1NzNFMFx1NUNGMC8wMS12dWUvdnVlMi92dWUyXHU2RTkwXHU3ODAxXHU3Q0ZCXHU1MjE3L1ZVRTItMTAtdnVlLWNvbXBvbmVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgXyBmcm9tICdsb2Rhc2gnOwp2YXIgVnVlTGF6eUxvYWQgPSB7CiAgaW5zdGFsbDogZnVuY3Rpb24gaW5zdGFsbChWdWUsIG9wdGlvbnMpIHsKICAgIHZhciBMYXp5Q2xhc3MgPSBsYXp5KFZ1ZSk7CiAgICB2YXIgaW5zdGFuY2UgPSBuZXcgTGF6eUNsYXNzKG9wdGlvbnMpOwogICAgVnVlLmRpcmVjdGl2ZSgnbGF6eScsIHsKICAgICAgLy8g5omA5pyJ55qE5oyH5Luk6LCD55So55qE6YO95pivYWRk5pa55rOVCiAgICAgIGJpbmQ6IGluc3RhbmNlLmFkZC5iaW5kKGluc3RhbmNlKSwKICAgICAgdW5iaW5kOiBpbnN0YW5jZS5yZW1vdmUuYmluZChpbnN0YW5jZSkKICAgIH0pOwogIH0KfTsKCnZhciBzY3JvbGxQYXJlbnQgPSBmdW5jdGlvbiBzY3JvbGxQYXJlbnQoZWwpIHsKICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTsKCiAgd2hpbGUgKHBhcmVudCkgewogICAgaWYgKC9zY3JvbGwvLnRlc3QoZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQpWydvdmVyZmxvdyddKSkgewogICAgICByZXR1cm4gcGFyZW50OwogICAgfQoKICAgIHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlOwogIH0KCiAgcmV0dXJuIHBhcmVudDsKfTsKCnZhciByZW5kZXIgPSBmdW5jdGlvbiByZW5kZXIobGlzdGVuZXIsIHN0YXR1cykgewogIHZhciBlbCA9IGxpc3RlbmVyLmVsOwogIHZhciBzcmMgPSAnJzsKCiAgc3dpdGNoIChzdGF0dXMpIHsKICAgIGNhc2UgJ2xvYWRpbmcnOgogICAgICBzcmMgPSBsaXN0ZW5lci5vcHRpb25zLmxvYWRpbmc7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgJ2xvYWRlZCc6CiAgICAgIHNyYyA9IGxpc3RlbmVyLnNyYzsKICAgICAgYnJlYWs7CgogICAgY2FzZSAnZXJyb3InOgogICAgICBzcmMgPSBsaXN0ZW5lci5vcHRpb25zLmVycm9yOwogICAgICBicmVhazsKCiAgICBkZWZhdWx0OgogICAgICBicmVhazsKICB9CgogIGVsLnNldEF0dHJpYnV0ZSgnc3JjJywgc3JjKTsKfTsKCnZhciBsb2FkSW1nID0gZnVuY3Rpb24gbG9hZEltZyhzcmMsIHJlc29sdmUsIHJlamVjdCkgewogIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTsKICBpbWcuc3JjID0gc3JjOwogIGltZy5vbmxvYWQgPSByZXNvbHZlOwogIGltZy5vbmVycm9yID0gcmVqZWN0Owp9OwoKdmFyIGxhenkgPSBmdW5jdGlvbiBsYXp5KFZ1ZSkgewogIHZhciBSZWFjdGl2ZUxpc3RlbmVyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIFJlYWN0aXZlTGlzdGVuZXIoX3JlZikgewogICAgICB2YXIgZWwgPSBfcmVmLmVsLAogICAgICAgICAgc3JjID0gX3JlZi5zcmMsCiAgICAgICAgICBvcHRpb25zID0gX3JlZi5vcHRpb25zOwoKICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJlYWN0aXZlTGlzdGVuZXIpOwoKICAgICAgdGhpcy5lbCA9IGVsOwogICAgICB0aGlzLnNyYyA9IHNyYzsKICAgICAgdGhpcy5zdGF0ZSA9IHsKICAgICAgICBsb2FkaW5nOiBmYWxzZQogICAgICB9OwogICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zOwogICAgfQoKICAgIF9jcmVhdGVDbGFzcyhSZWFjdGl2ZUxpc3RlbmVyLCBbewogICAgICBrZXk6ICJjaGVja0luVmlldyIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjaGVja0luVmlldygpIHsKICAgICAgICAvLyDnlKjmnaXmo4DmtYvoh6rlt7HlnKjkuI3lnKjlj6/op4bljLrln5/lhoUKICAgICAgICAvLyDojrflj5blvZPliY3lhYPntKAg6Led56a75bGP5bmV55qE5L2N572uIAogICAgICAgIHZhciBfdGhpcyRlbCRnZXRCb3VuZGluZ0MgPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLAogICAgICAgICAgICB0b3AgPSBfdGhpcyRlbCRnZXRCb3VuZGluZ0MudG9wOwoKICAgICAgICByZXR1cm4gdG9wIDwgd2luZG93LmlubmVySGVpZ2h0ICogdGhpcy5vcHRpb25zLnByZWxvYWQ7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAibG9hZCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBsb2FkKCkgewogICAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICAgIC8vIOeUqOadpeWKoOi9veecn+WunueahOWbvueJh+i3r+W+hAogICAgICAgIC8vIOWFiOaYvuekumxvYWRpbmflm77niYcgCiAgICAgICAgLy8g5Zyo5Y675Yqg6L2955yf5a6e5Zu+54mHIO+8jCDlm77niYfmiJDlip/lkI7mmL7npLrmiJDlip/lhoXlrrnvvIzlpLHotKXmmL7npLrlpLHotKXnmoTlhoXlrrkKICAgICAgICByZW5kZXIodGhpcywgJ2xvYWRpbmcnKTsKICAgICAgICBsb2FkSW1nKHRoaXMuc3JjLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAvLyBuZXcgSW1nLnNyYyBvbmxvYWQKICAgICAgICAgIF90aGlzLnN0YXRlLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgcmVuZGVyKF90aGlzLCAnbG9hZGVkJyk7CiAgICAgICAgfSwgZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuc3RhdGUubG9hZGluZyA9IHRydWU7CiAgICAgICAgICByZW5kZXIoX3RoaXMsICdlcnJvcicpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9XSk7CgogICAgcmV0dXJuIFJlYWN0aXZlTGlzdGVuZXI7CiAgfSgpOwoKICByZXR1cm4gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgIGZ1bmN0aW9uIExhenlDbGFzcyhvcHRpb25zKSB7CiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBMYXp5Q2xhc3MpOwoKICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9uczsKICAgICAgdGhpcy5iaW5kSGFuZGxlciA9IGZhbHNlOwogICAgICB0aGlzLmxpc3RlbmVycyA9IFtdOwogICAgfQoKICAgIF9jcmVhdGVDbGFzcyhMYXp5Q2xhc3MsIFt7CiAgICAgIGtleTogImFkZCIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGQoZWwsIGJpbmRpbmdzKSB7CiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgICB2YXIgZWxlID0gc2Nyb2xsUGFyZW50KGVsKTsgLy8gMS7nm5HmjqdlbCDmmK/lkKbpnIDopoHmmL7npLogCgogICAgICAgICAgdmFyIGxpc3RlbmVyID0gbmV3IFJlYWN0aXZlTGlzdGVuZXIoewogICAgICAgICAgICBlbDogZWwsCiAgICAgICAgICAgIHNyYzogYmluZGluZ3MudmFsdWUsCiAgICAgICAgICAgIG9wdGlvbnM6IF90aGlzMi5vcHRpb25zCiAgICAgICAgICB9KTsKCiAgICAgICAgICBfdGhpczIubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpOwoKICAgICAgICAgIGlmICghX3RoaXMyLmJpbmRIYW5kbGVyKSB7CiAgICAgICAgICAgIC8vIGludGVyc2VjdGlvbk9ic2VydmVyCiAgICAgICAgICAgIC8vIOmZjeS9jumikeeOh+eUqOiKgua1gSDpmLLmipblsLHmmK/mnIDnu4jlj6rop6blj5HkuIDmrKEKICAgICAgICAgICAgLy8gMi7nu5Hlrprmu5rliqjkuovku7YKICAgICAgICAgICAgdmFyIGxhenlIYW5kbGVyID0gXy50aHJvdHRsZShfdGhpczIubGF6eUxvYWRIYW5kbGVyLmJpbmQoX3RoaXMyKSwgNTAwKTsKCiAgICAgICAgICAgIGVsZS5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBsYXp5SGFuZGxlciwgewogICAgICAgICAgICAgIHBhc3NpdmU6IHRydWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzMi5iaW5kSGFuZGxlciA9IHRydWU7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMyLmxhenlMb2FkSGFuZGxlcigpOyAvL+WIneWni+WMliDlvZPliY3pnIDopoHlsZXnpLrnmoQKCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sIHsKICAgICAga2V5OiAibGF6eUxvYWRIYW5kbGVyIiwKICAgICAgdmFsdWU6IGZ1bmN0aW9uIGxhenlMb2FkSGFuZGxlcigpIHsKICAgICAgICAvLyDnnIvkuIDkuIsg5ZOq5Lqb6ZyA6KaB5Yqg6L29CiAgICAgICAgLy8g5Zyo5Y+v6KeG5Yy65Z+f5YaFIO+8jCDov5nkuKrlhYPntKDmsqHmnInooqvliqDovb3ov4cKICAgICAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcikgewogICAgICAgICAgaWYgKGxpc3RlbmVyLnN0YXRlLmxvYWRpbmcpIHJldHVybjsgLy8g5aaC5p6c6Ieq5bex5Zyo5Y+v6KeG5Yy65Z+f5YaFIO+8jOWwseiwg+eUqOiHquW3seeahOWKoOi9veaWueazleWNs+WPrwoKICAgICAgICAgIGxpc3RlbmVyLmNoZWNrSW5WaWV3KCkgJiYgbGlzdGVuZXIubG9hZCgpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LCB7CiAgICAgIGtleTogInJlbW92ZSIsCiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW1vdmUoKSB7fQogICAgfV0pOwoKICAgIHJldHVybiBMYXp5Q2xhc3M7CiAgfSgpOwp9OwoKZXhwb3J0IGRlZmF1bHQgVnVlTGF6eUxvYWQ7"},{"version":3,"sources":["F:/learn/vue/珠峰/01-vue/vue2/vue2源码系列/VUE2-10-vue-component/src/components/history/vue-lazyload.js"],"names":["_","VueLazyLoad","install","Vue","options","LazyClass","lazy","instance","directive","bind","add","unbind","remove","scrollParent","el","parent","parentNode","test","getComputedStyle","render","listener","status","src","loading","error","setAttribute","loadImg","resolve","reject","img","Image","onload","onerror","ReactiveListener","state","getBoundingClientRect","top","window","innerHeight","preload","bindHandler","listeners","bindings","nextTick","ele","value","push","lazyHandler","throttle","lazyLoadHandler","addEventListener","passive","forEach","checkInView","load"],"mappings":"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","sourcesContent":["import _ from 'lodash'\nconst VueLazyLoad = {\n    install(Vue, options) {\n        const LazyClass = lazy(Vue);\n        let instance = new LazyClass(options)\n        Vue.directive('lazy', {\n            // 所有的指令调用的都是add方法\n            bind: instance.add.bind(instance),\n            unbind: instance.remove.bind(instance)\n        })\n    }\n}\nconst scrollParent = (el) => {\n    let parent = el.parentNode;\n    while (parent) {\n        if (/scroll/.test(getComputedStyle(parent)['overflow'])) {\n            return parent;\n        }\n        parent = parent.parentNode\n    }\n    return parent;\n}\nconst render = (listener, status) => {\n    let el = listener.el;\n    let src = ''\n    switch (status) {\n        case 'loading':\n            src = listener.options.loading;\n            break;\n        case 'loaded':\n            src = listener.src;\n            break;\n        case 'error':\n            src = listener.options.error\n            break;\n        default:\n            break;\n    }\n    el.setAttribute('src',src);\n}\nconst loadImg = (src,resolve,reject) => {\n    let img = new Image();\n    img.src = src;\n    img.onload = resolve;\n    img.onerror = reject;\n}\nconst lazy = (Vue) => {\n    class ReactiveListener {\n        constructor({ el, src, options }) {\n            this.el = el;\n            this.src = src;\n            this.state = { loading: false }\n            this.options = options\n        }\n        checkInView() { // 用来检测自己在不在可视区域内\n            // 获取当前元素 距离屏幕的位置 \n            let { top } = this.el.getBoundingClientRect();\n\n            return top < window.innerHeight * this.options.preload\n        }\n        load() { // 用来加载真实的图片路径\n            // 先显示loading图片 \n            // 在去加载真实图片 ， 图片成功后显示成功内容，失败显示失败的内容\n            render(this, 'loading');\n            loadImg(this.src, () => { // new Img.src onload\n                this.state.loading = true;\n                render(this, 'loaded');\n            }, () => {\n                this.state.loading = true;\n                render(this,'error');\n            });\n        }\n    }\n    return class LazyClass {\n        constructor(options) {\n            this.options = options;\n            this.bindHandler = false;\n            this.listeners = [];\n        }\n        add(el, bindings) {\n            Vue.nextTick(() => {\n                let ele = scrollParent(el);\n                // 1.监控el 是否需要显示 \n                let listener = new ReactiveListener({\n                    el,\n                    src: bindings.value,\n                    options:this.options\n                });\n                this.listeners.push(listener);\n\n                if (!this.bindHandler) {\n                    // intersectionObserver\n                    // 降低频率用节流 防抖就是最终只触发一次\n                    // 2.绑定滚动事件\n                    let lazyHandler = _.throttle(this.lazyLoadHandler.bind(this), 500);\n                    ele.addEventListener('scroll', lazyHandler, {\n                        passive: true\n                    });\n                    this.bindHandler = true;\n                }\n                this.lazyLoadHandler(); //初始化 当前需要展示的\n            })\n        }\n        lazyLoadHandler() {\n            // 看一下 哪些需要加载\n            // 在可视区域内 ， 这个元素没有被加载过\n            this.listeners.forEach(listener => {\n                if (listener.state.loading) return;\n                // 如果自己在可视区域内 ，就调用自己的加载方法即可\n                listener.checkInView() && listener.load();\n            })\n        }\n        remove() {}\n    }\n}\nexport default VueLazyLoad;"]}]}